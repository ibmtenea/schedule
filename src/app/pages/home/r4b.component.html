<ngx-spinner></ngx-spinner><div class="container-fluid">
  <div class="row">
    <div class="col-10 p-0 mt-5">
      <h2>Estado del servicio RB4</h2>
    </div>
    <div class="col-2 p-0 mt-5">
      <app-imprimir classe="ClaseRBcuatroEstados"></app-imprimir>
    </div>
  </div>

  <div class="row">
    <div class="col-9 text-right p-0 mt-2">
      <!-- <a
        alt="Nuevo registro"
        title="nuevo registro"
        [routerLink]="['/', 'alta']"
        class="btn btn-info pt4 btn-circle posicionplus"
        ><i class="fa fa-plus fa-3"></i
      ></a> -->
    </div>
    <div class="col-3 p-0 mt-2 text-right">
      <div class="form">
        <mat-form-field floatPlaceholder="never" color="accent">
          <input matInput placeholder="Buscar" (keyup)="updateFilter($event)" />
        </mat-form-field>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 p-0 m-0">
      <ngx-datatable
        #mydatatable
        class="material striped"
        headerHeight="50"
        [limit]="25"
        [columnMode]="'force'"
        footerHeight="50"
        rowHeight="50"
        [rows]="rows"
        [messages]="my_messages"
      >
        <!-- <ngx-datatable-column name="id_esse" [maxWidth]="90">
          <ng-template ngx-datatable-header-template>
            <span>ID </span>
          </ng-template>
          <ng-template
            class="mat-column-id"
            ngx-datatable-cell-template
            let-rowIndex="rowIndex"
            let-value="value"
            let-row="row"
            ><div class="text-center">{{ row.id_esse }}</div>
          </ng-template>
        </ngx-datatable-column> -->

        <ngx-datatable-column name="esse_servicio" [maxWidth]="380">
          <ng-template ngx-datatable-header-template>
            <span>Servicio</span>
          </ng-template>
          <ng-template
            ngx-datatable-cell-template
            let-rowIndex="rowIndex"
            let-value="value"
            let-row="row"
          >
            {{ row.esse_servicio}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="esse_estado" [maxWidth]="170">
          <ng-template ngx-datatable-header-template>
            <span>Estado</span>
          </ng-template>
          <ng-template
            ngx-datatable-cell-template
            let-rowIndex="rowIndex"
            let-row="row"
            let-value="value"
          >
            <div
              [ngClass]="{
                positive: row.esse_estado == 'OK',
                negative: row.esse_estado == 'KO',
                warning: row.esse_estado == 'WARNING'
              }"
            >
              <span
                title="Doble click para editar"
                (dblclick)="editing[rowIndex + '-esse_estado'] = true"
                *ngIf="!editing[rowIndex + '-esse_estado']"
              >
                {{ row.esse_estado }}
              </span>
              <input type="hidden" #varId [value]="row.id_esse" />
              <select
                class="form-control"
                name="esse_estado"
                *ngIf="editing[rowIndex + '-esse_estado']"
                (clickOutside)="editing[rowIndex + '-esse_estado'] = false"
                (change)="updateValue($event, 'esse_estado', rowIndex)"
                [value]="row.esse_estado"
                [title]="row.id_esse"
                id="{{periodo.clave_comun}}"
                ><option value="OK">OK</option>
                <option value="KO">KO</option>
                <option value="WARNING">WARNING</option>
              </select>
            </div>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="esse_observaciones" [maxWidth]="1680">
          <ng-template ngx-datatable-header-template>
            <span>Observaciones</span>
          </ng-template>
          <ng-template
            ngx-datatable-cell-template
            let-rowIndex="rowIndex"
            let-value="value"
            let-row="row"
          >
            <span
              title="Doble click para editar"
              (dblclick)="editing[rowIndex + '-esse_observaciones'] = true"
              *ngIf="!editing[rowIndex + '-esse_observaciones']"
            >
              {{ row.esse_observaciones}}
              <span class="text-muted2" *ngIf="row.esse_observaciones === null">
                
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              </span>
            </span>

            <input
              required
              autofocus
              (clickOutside)="editing[rowIndex + '-esse_observaciones'] = false"
              (keyup.enter)="
                updateValue($event, 'esse_observaciones', rowIndex)
              "
              *ngIf="editing[rowIndex + '-esse_observaciones']"
              type="text"
              class="form-control"
              [value]="row.esse_observaciones"
              [title]="row.id_esse"
              id="{{periodo.clave_comun}}"
            />
          </ng-template>
        </ngx-datatable-column>

        <!-- <ngx-datatable-column name="ver" [maxWidth]="150">
      <ng-template
        class="mat-column-id"
        ngx-datatable-cell-template
        let-row="row"
      >

        <div class="text-center">
          <div class="row">
            <div class="col-12 p0 m0">


<div *ngIf="row.disabledBotones===turnoValor && registroroleperson.id_rol!= '8'">
              <button (click)="duplicar(row, i)"
              class="btn btn-warning botonsizes mr-1">
                  <i class="fa fa-clone"></i>
              </button>
              <a
                [routerLink]="['/detalle', row.tokenid]"
                class="btn btn-warning botonsizes mr-1"
                ><i class="fa fa-pencil"></i
              ></a>
              <button
                (click)="borrarRegistro(row, i)"
                class="btn btn-warning botonsizes"
              >
                <i class="fa fa-trash"></i>
              </button>
</div> 

<div *ngIf="registroroleperson.id_rol== '8'">
            <button (click)="duplicar(row, i)"
            class="btn btn-warning botonsizes mr-1">
                <i class="fa fa-clone"></i>
            </button>
            <a
              [routerLink]="['/detalle', row.tokenid]"
              class="btn btn-warning botonsizes mr-1"
              ><i class="fa fa-pencil"></i
            ></a>
            <button
              (click)="borrarRegistro(row, i)"
              class="btn btn-warning botonsizes"
            >
              <i class="fa fa-trash"></i>
            </button>
</div> 


            </div>
          </div>
        </div>
      </ng-template>
    </ngx-datatable-column> -->
      </ngx-datatable>
    </div>
  </div>
</div>
